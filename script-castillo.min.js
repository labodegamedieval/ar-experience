let respuestasCastillo = {visual: false,quiz1: false,quiz2: false,quiz3: false,secuencia: false};let aciertosCastillo = 0;function checkVisualAnswer(respuesta, correcta, index) {const resultado = document.getElementById(`visual-resultado-${index}`);if (respuesta === correcta) {resultado.textContent = "✅ ¡Correcto!";playSound("success-sound");if (!respuestasCastillo["visual"]) {respuestasCastillo["visual"] = true;aciertosCastillo++;}} else {resultado.textContent = "❌ Intenta de nuevo.";playSound("error-sound");}comprobarTodoCompletado();}function checkAnswer(respuesta, correcta, index) {const resultado = document.getElementById(`quiz-resultado-${index}`);if (respuesta === correcta) {resultado.textContent = "✅ ¡Correcto!";playSound("success-sound");const key = `quiz${index}`;if (!respuestasCastillo[key]) {respuestasCastillo[key] = true;aciertosCastillo++;}} else {resultado.textContent = "❌ Incorrecto.";playSound("error-sound");}comprobarTodoCompletado();}function comprobarTodoCompletado() {const completado = Object.values(respuestasCastillo).every(val => val);if (completado) {document.getElementById("continue-button").style.display = "block";const jugador = localStorage.getItem("jugador") || "Aventurero";const inicio = Number(localStorage.getItem("inicio_castillo")) || Date.now();const tiempo = Math.floor((Date.now() - inicio) / 1000);const ranking = JSON.parse(localStorage.getItem("ranking") || "[]");ranking.push({ nombre: jugador, tiempo: tiempo, aciertos: aciertosCastillo });localStorage.setItem("ranking", JSON.stringify(ranking));}}document.addEventListener("DOMContentLoaded", () => {if (!localStorage.getItem("inicio_castillo")) {localStorage.setItem("inicio_castillo", Date.now());}});function playSound(id) {const el = document.getElementById(id);if (el) {el.currentTime = 0;el.play().catch(() => {});}}function showHint(pista) {alert(pista);}